<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>GENESIS - Control Panel</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <style>
    * { margin: 0; padding: 0; box-sizing: border-box; }

    body {
      font-family: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
      background: #f5f5f7;
      min-height: 100vh;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LOGIN - Big, obvious, impossible to miss
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .login {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #1a1a2e 0%, #16213e 100%);
    }

    .login.hidden { display: none; }

    .login-box {
      background: white;
      border-radius: 24px;
      padding: 48px;
      width: 420px;
      text-align: center;
      box-shadow: 0 20px 60px rgba(0,0,0,0.3);
    }

    .login-icon {
      width: 80px;
      height: 80px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 20px;
      margin: 0 auto 24px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 40px;
    }

    .login-title {
      font-size: 28px;
      font-weight: 700;
      color: #1a1a2e;
      margin-bottom: 8px;
    }

    .login-subtitle {
      font-size: 16px;
      color: #666;
      margin-bottom: 32px;
    }

    .login-label {
      display: block;
      text-align: left;
      font-size: 14px;
      font-weight: 600;
      color: #333;
      margin-bottom: 8px;
    }

    .login-input {
      width: 100%;
      padding: 16px 20px;
      font-size: 16px;
      border: 2px solid #e0e0e0;
      border-radius: 12px;
      margin-bottom: 20px;
      transition: border-color 0.2s;
    }

    .login-input:focus {
      outline: none;
      border-color: #667eea;
    }

    .login-btn {
      width: 100%;
      padding: 18px;
      font-size: 18px;
      font-weight: 600;
      color: white;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border: none;
      border-radius: 12px;
      cursor: pointer;
      transition: transform 0.2s, box-shadow 0.2s;
    }

    .login-btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
    }

    .login-btn:active {
      transform: translateY(0);
    }

    .login-error {
      background: #fee2e2;
      color: #dc2626;
      padding: 14px;
      border-radius: 10px;
      margin-top: 20px;
      font-weight: 500;
      display: none;
    }

    .login-error.show { display: block; }

    .login-hint {
      margin-top: 24px;
      padding-top: 24px;
      border-top: 1px solid #eee;
      color: #999;
      font-size: 13px;
    }

    /* â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       MAIN DASHBOARD - Big cards, obvious everything
    â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• */
    .dashboard {
      display: none;
      min-height: 100vh;
      background: #f5f5f7;
    }

    .dashboard.show { display: block; }

    /* Header */
    .header {
      background: white;
      padding: 16px 32px;
      display: flex;
      justify-content: space-between;
      align-items: center;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      position: sticky;
      top: 0;
      z-index: 100;
    }

    .header-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .header-logo {
      width: 44px;
      height: 44px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 24px;
    }

    .header-title {
      font-size: 22px;
      font-weight: 700;
      color: #1a1a2e;
    }

    .header-status {
      display: flex;
      align-items: center;
      gap: 8px;
      padding: 8px 16px;
      background: #dcfce7;
      border-radius: 20px;
      color: #16a34a;
      font-weight: 600;
      font-size: 14px;
    }

    .header-status::before {
      content: '';
      width: 10px;
      height: 10px;
      background: #16a34a;
      border-radius: 50%;
      animation: blink 2s infinite;
    }

    @keyframes blink {
      0%, 100% { opacity: 1; }
      50% { opacity: 0.5; }
    }

    .header-right {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .header-user {
      font-size: 15px;
      color: #666;
    }

    .header-user strong {
      color: #1a1a2e;
    }

    .logout-btn {
      padding: 10px 20px;
      background: #fee2e2;
      color: #dc2626;
      border: none;
      border-radius: 10px;
      font-size: 14px;
      font-weight: 600;
      cursor: pointer;
      transition: background 0.2s;
    }

    .logout-btn:hover {
      background: #fecaca;
    }

    /* Content */
    .content {
      padding: 32px;
      max-width: 1400px;
      margin: 0 auto;
    }

    /* Stats Row - Big obvious numbers */
    .stats-row {
      display: grid;
      grid-template-columns: repeat(4, 1fr);
      gap: 20px;
      margin-bottom: 32px;
    }

    .stat-card {
      background: white;
      border-radius: 16px;
      padding: 24px;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .stat-label {
      font-size: 14px;
      color: #666;
      margin-bottom: 8px;
      font-weight: 500;
    }

    .stat-value {
      font-size: 36px;
      font-weight: 700;
      color: #1a1a2e;
    }

    .stat-value span {
      font-size: 16px;
      color: #999;
      font-weight: 500;
    }

    /* Section */
    .section {
      margin-bottom: 32px;
    }

    .section-header {
      display: flex;
      align-items: center;
      gap: 12px;
      margin-bottom: 20px;
    }

    .section-icon {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 10px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 20px;
    }

    .section-title {
      font-size: 20px;
      font-weight: 700;
      color: #1a1a2e;
    }

    .section-badge {
      background: #e0e7ff;
      color: #4f46e5;
      padding: 4px 12px;
      border-radius: 20px;
      font-size: 13px;
      font-weight: 600;
    }

    /* Big Facet Buttons */
    .facets {
      display: grid;
      grid-template-columns: repeat(5, 1fr);
      gap: 16px;
      margin-bottom: 32px;
    }

    .facet {
      background: white;
      border-radius: 16px;
      padding: 28px 20px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
      border: 2px solid transparent;
    }

    .facet:hover {
      transform: translateY(-4px);
      box-shadow: 0 12px 30px rgba(0,0,0,0.1);
      border-color: #667eea;
    }

    .facet-icon {
      width: 56px;
      height: 56px;
      margin: 0 auto 16px;
      border-radius: 14px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 28px;
    }

    .facet-icon.cmd { background: #dbeafe; }
    .facet-icon.idn { background: #fce7f3; }
    .facet-icon.evd { background: #d1fae5; }
    .facet-icon.exe { background: #fef3c7; }
    .facet-icon.out { background: #e0e7ff; }

    .facet-name {
      font-size: 18px;
      font-weight: 700;
      color: #1a1a2e;
      margin-bottom: 4px;
    }

    .facet-desc {
      font-size: 13px;
      color: #666;
    }

    /* Layer Accordion - Super obvious */
    .layers {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .layer {
      border-bottom: 1px solid #f0f0f0;
    }

    .layer:last-child { border-bottom: none; }

    .layer-header {
      padding: 20px 24px;
      display: flex;
      align-items: center;
      justify-content: space-between;
      cursor: pointer;
      transition: background 0.2s;
    }

    .layer-header:hover {
      background: #fafafa;
    }

    .layer-left {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .layer-num {
      width: 44px;
      height: 44px;
      border-radius: 12px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 16px;
      font-weight: 700;
    }

    .layer-num.l0 { background: #f3e8ff; color: #9333ea; }
    .layer-num.l1 { background: #cffafe; color: #0891b2; }
    .layer-num.l2 { background: #d1fae5; color: #059669; }
    .layer-num.l3 { background: #fef3c7; color: #d97706; }
    .layer-num.l4 { background: #fee2e2; color: #dc2626; }

    .layer-info h3 {
      font-size: 17px;
      font-weight: 600;
      color: #1a1a2e;
      margin-bottom: 2px;
    }

    .layer-info p {
      font-size: 14px;
      color: #666;
    }

    .layer-right {
      display: flex;
      align-items: center;
      gap: 16px;
    }

    .layer-count {
      background: #f0f0f0;
      padding: 6px 14px;
      border-radius: 20px;
      font-size: 14px;
      font-weight: 600;
      color: #666;
    }

    .layer-arrow {
      font-size: 20px;
      color: #999;
      transition: transform 0.3s;
    }

    .layer.open .layer-arrow {
      transform: rotate(180deg);
    }

    .layer-body {
      display: none;
      padding: 0 24px 24px;
    }

    .layer.open .layer-body {
      display: block;
    }

    /* Room Grid - Big clickable cards */
    .rooms {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(130px, 1fr));
      gap: 12px;
    }

    .room {
      background: #fafafa;
      border: 2px solid #e0e0e0;
      border-radius: 14px;
      padding: 18px 12px;
      text-align: center;
      cursor: pointer;
      transition: all 0.2s;
      position: relative;
    }

    .room:hover {
      background: white;
      border-color: #667eea;
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(0,0,0,0.08);
    }

    .room-status {
      position: absolute;
      top: 10px;
      right: 10px;
      width: 12px;
      height: 12px;
      border-radius: 50%;
      background: #22c55e;
      box-shadow: 0 0 8px rgba(34, 197, 94, 0.5);
    }

    .room-status.warning { background: #f59e0b; box-shadow: 0 0 8px rgba(245, 158, 11, 0.5); }
    .room-status.error { background: #ef4444; box-shadow: 0 0 8px rgba(239, 68, 68, 0.5); }
    .room-status.special { background: #a855f7; box-shadow: 0 0 8px rgba(168, 85, 247, 0.5); }

    .room-icon {
      font-size: 32px;
      margin-bottom: 8px;
    }

    .room-name {
      font-size: 13px;
      font-weight: 600;
      color: #333;
    }

    /* Log Panel */
    .log-panel {
      background: white;
      border-radius: 16px;
      overflow: hidden;
      box-shadow: 0 2px 10px rgba(0,0,0,0.05);
    }

    .log-header {
      padding: 16px 24px;
      background: #1a1a2e;
      color: white;
      font-weight: 600;
      display: flex;
      align-items: center;
      gap: 10px;
    }

    .log-header::before {
      content: 'ğŸ“‹';
      font-size: 18px;
    }

    .log-body {
      padding: 20px 24px;
      height: 200px;
      overflow-y: auto;
      background: #1a1a2e;
      font-family: 'SF Mono', 'Monaco', 'Consolas', monospace;
      font-size: 13px;
      line-height: 1.8;
    }

    .log-entry {
      display: flex;
      gap: 12px;
    }

    .log-time {
      color: #666;
    }

    .log-msg {
      color: #4ade80;
    }

    .log-msg.warn { color: #fbbf24; }
    .log-msg.error { color: #f87171; }
    .log-msg.info { color: #60a5fa; }

    /* Help Tooltip */
    .help-btn {
      position: fixed;
      bottom: 24px;
      right: 24px;
      width: 56px;
      height: 56px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border: none;
      border-radius: 50%;
      color: white;
      font-size: 24px;
      cursor: pointer;
      box-shadow: 0 4px 20px rgba(102, 126, 234, 0.4);
      transition: transform 0.2s;
    }

    .help-btn:hover {
      transform: scale(1.1);
    }

    /* Responsive */
    @media (max-width: 1100px) {
      .facets { grid-template-columns: repeat(3, 1fr); }
      .stats-row { grid-template-columns: repeat(2, 1fr); }
    }

    @media (max-width: 768px) {
      .facets { grid-template-columns: repeat(2, 1fr); }
      .stats-row { grid-template-columns: 1fr; }
      .header { padding: 12px 16px; flex-wrap: wrap; gap: 12px; }
      .content { padding: 16px; }
      .rooms { grid-template-columns: repeat(3, 1fr); }
    }
  </style>
</head>
<body>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       LOGIN - Can't possibly mess this up
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="login" id="login">
    <div class="login-box">
      <div class="login-icon">ğŸ”</div>
      <h1 class="login-title">Welcome to Genesis</h1>
      <p class="login-subtitle">Enter your credentials to continue</p>

      <label class="login-label">Owner ID</label>
      <input type="text" class="login-input" id="uid" placeholder="Enter your Owner ID" autocomplete="off">

      <label class="login-label">Passphrase</label>
      <input type="password" class="login-input" id="pwd" placeholder="Enter your passphrase">

      <button class="login-btn" id="loginBtn">Sign In</button>

      <div class="login-error" id="loginErr">
        âš ï¸ Incorrect Owner ID or Passphrase. Please try again.
      </div>

      <div class="login-hint">
        ğŸ”‘ YubiKey users: Touch your key when prompted
      </div>
    </div>
  </div>

  <!-- â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
       DASHBOARD - Everything big and obvious
  â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â• -->
  <div class="dashboard" id="dashboard">
    <header class="header">
      <div class="header-left">
        <div class="header-logo">â¬¡</div>
        <h1 class="header-title">Genesis Control Panel</h1>
        <div class="header-status">System Online</div>
      </div>
      <div class="header-right">
        <span class="header-user">Signed in as <strong id="userName">murray-ux</strong></span>
        <button class="logout-btn" id="logoutBtn">Sign Out</button>
      </div>
    </header>

    <main class="content">

      <!-- Stats - Big obvious numbers -->
      <div class="stats-row">
        <div class="stat-card">
          <div class="stat-label">â±ï¸ System Uptime</div>
          <div class="stat-value"><span id="uptime">0</span> <span>seconds</span></div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ğŸ  Active Rooms</div>
          <div class="stat-value">41 <span>online</span></div>
        </div>
        <div class="stat-card">
          <div class="stat-label">ğŸ“¨ Messages Sent</div>
          <div class="stat-value" id="messages">0</div>
        </div>
        <div class="stat-card">
          <div class="stat-label">âœ… Policy Checks</div>
          <div class="stat-value" id="checks">0</div>
        </div>
      </div>

      <!-- Pentagon Section -->
      <section class="section">
        <div class="section-header">
          <div class="section-icon">â¬¡</div>
          <h2 class="section-title">Pentagon</h2>
          <span class="section-badge">5 Main Functions</span>
        </div>

        <div class="facets">
          <div class="facet" onclick="showFacet('CMD')">
            <div class="facet-icon cmd">ğŸ’»</div>
            <div class="facet-name">CMD</div>
            <div class="facet-desc">Run Commands</div>
          </div>
          <div class="facet" onclick="showFacet('IDN')">
            <div class="facet-icon idn">ğŸ”</div>
            <div class="facet-name">IDN</div>
            <div class="facet-desc">Identity & Login</div>
          </div>
          <div class="facet" onclick="showFacet('EVD')">
            <div class="facet-icon evd">ğŸ“</div>
            <div class="facet-name">EVD</div>
            <div class="facet-desc">Evidence Storage</div>
          </div>
          <div class="facet" onclick="showFacet('EXE')">
            <div class="facet-icon exe">âš¡</div>
            <div class="facet-name">EXE</div>
            <div class="facet-desc">Run Workflows</div>
          </div>
          <div class="facet" onclick="showFacet('OUT')">
            <div class="facet-icon out">ğŸ“¤</div>
            <div class="facet-name">OUT</div>
            <div class="facet-desc">Generate Reports</div>
          </div>
        </div>
      </section>

      <!-- Layers Section -->
      <section class="section">
        <div class="section-header">
          <div class="section-icon">ğŸ—ï¸</div>
          <h2 class="section-title">System Layers</h2>
          <span class="section-badge">41 Rooms Total</span>
        </div>

        <div class="layers">
          <!-- Layer 0 -->
          <div class="layer" data-layer="0">
            <div class="layer-header" onclick="toggleLayer(this)">
              <div class="layer-left">
                <div class="layer-num l0">L0</div>
                <div class="layer-info">
                  <h3>Kernel</h3>
                  <p>Security, Encryption, Time Stamps</p>
                </div>
              </div>
              <div class="layer-right">
                <span class="layer-count">7 rooms</span>
                <span class="layer-arrow">â–¼</span>
              </div>
            </div>
            <div class="layer-body">
              <div class="rooms">
                <div class="room" onclick="openRoom('Thermostat')"><div class="room-status"></div><div class="room-icon">ğŸŒ¡ï¸</div><div class="room-name">Thermostat</div></div>
                <div class="room" onclick="openRoom('Chip')"><div class="room-status"></div><div class="room-icon">ğŸ”²</div><div class="room-name">Chip</div></div>
                <div class="room" onclick="openRoom('Battery')"><div class="room-status"></div><div class="room-icon">ğŸ”‹</div><div class="room-name">Battery</div></div>
                <div class="room" onclick="openRoom('Clock')"><div class="room-status"></div><div class="room-icon">ğŸ•</div><div class="room-name">Clock</div></div>
                <div class="room" onclick="openRoom('Compass')"><div class="room-status"></div><div class="room-icon">ğŸ§­</div><div class="room-name">Compass</div></div>
                <div class="room" onclick="openRoom('Fuse')"><div class="room-status"></div><div class="room-icon">âš¡</div><div class="room-name">Fuse</div></div>
                <div class="room" onclick="openRoom('Spark')"><div class="room-status"></div><div class="room-icon">âœ¨</div><div class="room-name">Spark</div></div>
              </div>
            </div>
          </div>

          <!-- Layer 1 -->
          <div class="layer" data-layer="1">
            <div class="layer-header" onclick="toggleLayer(this)">
              <div class="layer-left">
                <div class="layer-num l1">L1</div>
                <div class="layer-info">
                  <h3>Conduit</h3>
                  <p>Message Passing & Communication</p>
                </div>
              </div>
              <div class="layer-right">
                <span class="layer-count">7 rooms</span>
                <span class="layer-arrow">â–¼</span>
              </div>
            </div>
            <div class="layer-body">
              <div class="rooms">
                <div class="room" onclick="openRoom('Flares')"><div class="room-status"></div><div class="room-icon">ğŸ”¥</div><div class="room-name">Flares</div></div>
                <div class="room" onclick="openRoom('Locks')"><div class="room-status"></div><div class="room-icon">ğŸ”’</div><div class="room-name">Locks</div></div>
                <div class="room" onclick="openRoom('Doors')"><div class="room-status"></div><div class="room-icon">ğŸšª</div><div class="room-name">Doors</div></div>
                <div class="room" onclick="openRoom('Horn')"><div class="room-status"></div><div class="room-icon">ğŸ“¢</div><div class="room-name">Horn</div></div>
                <div class="room" onclick="openRoom('Mirrors')"><div class="room-status"></div><div class="room-icon">ğŸª</div><div class="room-name">Mirrors</div></div>
                <div class="room" onclick="openRoom('Antenna')"><div class="room-status"></div><div class="room-icon">ğŸ“¡</div><div class="room-name">Antenna</div></div>
                <div class="room" onclick="openRoom('Relay')"><div class="room-status"></div><div class="room-icon">ğŸ”„</div><div class="room-name">Relay</div></div>
              </div>
            </div>
          </div>

          <!-- Layer 2 -->
          <div class="layer" data-layer="2">
            <div class="layer-header" onclick="toggleLayer(this)">
              <div class="layer-left">
                <div class="layer-num l2">L2</div>
                <div class="layer-info">
                  <h3>Reservoir</h3>
                  <p>Data Storage & Caching</p>
                </div>
              </div>
              <div class="layer-right">
                <span class="layer-count">8 rooms</span>
                <span class="layer-arrow">â–¼</span>
              </div>
            </div>
            <div class="layer-body">
              <div class="rooms">
                <div class="room" onclick="openRoom('Trunk')"><div class="room-status"></div><div class="room-icon">ğŸ§³</div><div class="room-name">Trunk</div></div>
                <div class="room" onclick="openRoom('Spares')"><div class="room-status"></div><div class="room-icon">ğŸ”§</div><div class="room-name">Spares</div></div>
                <div class="room" onclick="openRoom('Coolant')"><div class="room-status"></div><div class="room-icon">â„ï¸</div><div class="room-name">Coolant</div></div>
                <div class="room" onclick="openRoom('Wash')"><div class="room-status"></div><div class="room-icon">ğŸ’§</div><div class="room-name">Wash</div></div>
                <div class="room" onclick="openRoom('Tank')"><div class="room-status"></div><div class="room-icon">â›½</div><div class="room-name">Tank</div></div>
                <div class="room" onclick="openRoom('Filter')"><div class="room-status"></div><div class="room-icon">ğŸ§¹</div><div class="room-name">Filter</div></div>
                <div class="room" onclick="openRoom('Jack')"><div class="room-status"></div><div class="room-icon">ğŸ”©</div><div class="room-name">Jack</div></div>
                <div class="room" onclick="openRoom('Glove')"><div class="room-status"></div><div class="room-icon">ğŸ§¤</div><div class="room-name">Glove</div></div>
              </div>
            </div>
          </div>

          <!-- Layer 3 -->
          <div class="layer" data-layer="3">
            <div class="layer-header" onclick="toggleLayer(this)">
              <div class="layer-left">
                <div class="layer-num l3">L3</div>
                <div class="layer-info">
                  <h3>Valve</h3>
                  <p>Policy Control & Rate Limiting</p>
                </div>
              </div>
              <div class="layer-right">
                <span class="layer-count">9 rooms</span>
                <span class="layer-arrow">â–¼</span>
              </div>
            </div>
            <div class="layer-body">
              <div class="rooms">
                <div class="room" onclick="openRoom('Brakes')"><div class="room-status"></div><div class="room-icon">ğŸ›‘</div><div class="room-name">Brakes</div></div>
                <div class="room" onclick="openRoom('Tint')"><div class="room-status"></div><div class="room-icon">ğŸ•¶ï¸</div><div class="room-name">Tint</div></div>
                <div class="room" onclick="openRoom('Wipers')"><div class="room-status"></div><div class="room-icon">ğŸŒ§ï¸</div><div class="room-name">Wipers</div></div>
                <div class="room" onclick="openRoom('Fuel')"><div class="room-status"></div><div class="room-icon">â›½</div><div class="room-name">Fuel</div></div>
                <div class="room" onclick="openRoom('Clutch')"><div class="room-status"></div><div class="room-icon">âš™ï¸</div><div class="room-name">Clutch</div></div>
                <div class="room" onclick="openRoom('Gears')"><div class="room-status"></div><div class="room-icon">âš™ï¸</div><div class="room-name">Gears</div></div>
                <div class="room" onclick="openRoom('Pedals')"><div class="room-status"></div><div class="room-icon">ğŸ‘Ÿ</div><div class="room-name">Pedals</div></div>
                <div class="room" onclick="openRoom('Gauges')"><div class="room-status"></div><div class="room-icon">ğŸ“Š</div><div class="room-name">Gauges</div></div>
                <div class="room" onclick="openRoom('Seatbelts')"><div class="room-status"></div><div class="room-icon">ğŸ”²</div><div class="room-name">Seatbelts</div></div>
              </div>
            </div>
          </div>

          <!-- Layer 4 -->
          <div class="layer" data-layer="4">
            <div class="layer-header" onclick="toggleLayer(this)">
              <div class="layer-left">
                <div class="layer-num l4">L4</div>
                <div class="layer-info">
                  <h3>Manifold</h3>
                  <p>Workflow Orchestration & Pipelines</p>
                </div>
              </div>
              <div class="layer-right">
                <span class="layer-count">10 rooms</span>
                <span class="layer-arrow">â–¼</span>
              </div>
            </div>
            <div class="layer-body">
              <div class="rooms">
                <div class="room" onclick="openRoom('Engine')"><div class="room-status"></div><div class="room-icon">ğŸš—</div><div class="room-name">Engine</div></div>
                <div class="room" onclick="openRoom('Wings')"><div class="room-status"></div><div class="room-icon">ğŸ¦…</div><div class="room-name">Wings</div></div>
                <div class="room" onclick="openRoom('Mods')"><div class="room-status"></div><div class="room-icon">ğŸ”Œ</div><div class="room-name">Mods</div></div>
                <div class="room" onclick="openRoom('Exhaust')"><div class="room-status"></div><div class="room-icon">ğŸ’¨</div><div class="room-name">Exhaust</div></div>
                <div class="room" onclick="openRoom('Turbo')"><div class="room-status"></div><div class="room-icon">ğŸŒ€</div><div class="room-name">Turbo</div></div>
                <div class="room" onclick="openRoom('Chassis')"><div class="room-status"></div><div class="room-icon">ğŸ› ï¸</div><div class="room-name">Chassis</div></div>
                <div class="room" onclick="openRoom('Bumper')"><div class="room-status"></div><div class="room-icon">ğŸš™</div><div class="room-name">Bumper</div></div>
                <div class="room" onclick="openRoom('Spoiler')"><div class="room-status"></div><div class="room-icon">ğŸï¸</div><div class="room-name">Spoiler</div></div>
                <div class="room" onclick="openRoom('Wheels')"><div class="room-status"></div><div class="room-icon">âšª</div><div class="room-name">Wheels</div></div>
                <div class="room" onclick="openRoom('Playroom')"><div class="room-status special"></div><div class="room-icon">ğŸ¨</div><div class="room-name">Playroom</div></div>
              </div>
            </div>
          </div>
        </div>
      </section>

      <!-- Activity Log -->
      <section class="section">
        <div class="section-header">
          <div class="section-icon">ğŸ“‹</div>
          <h2 class="section-title">Activity Log</h2>
          <span class="section-badge">Live Updates</span>
        </div>

        <div class="log-panel">
          <div class="log-header">System Events</div>
          <div class="log-body" id="logBody"></div>
        </div>
      </section>

    </main>

    <button class="help-btn" onclick="showHelp()" title="Need help?">?</button>
  </div>

  <script>
    // Credentials
    const VALID_UID = 'murray-ux';
    const VALID_PWD = 'genesis';

    // Elements
    const loginEl = document.getElementById('login');
    const dashboardEl = document.getElementById('dashboard');
    const uidEl = document.getElementById('uid');
    const pwdEl = document.getElementById('pwd');
    const loginBtn = document.getElementById('loginBtn');
    const loginErr = document.getElementById('loginErr');
    const logBody = document.getElementById('logBody');

    // Stats
    let uptime = 0;
    let messages = 0;
    let checks = 0;

    // Login
    loginBtn.onclick = function() {
      if (uidEl.value === VALID_UID && pwdEl.value === VALID_PWD) {
        loginEl.classList.add('hidden');
        dashboardEl.classList.add('show');
        document.getElementById('userName').textContent = uidEl.value;
        log('info', 'Successfully signed in as ' + uidEl.value);
        log('info', 'Genesis Control Panel loaded');
        log('info', 'All 41 rooms are online');
        startStats();
      } else {
        loginErr.classList.add('show');
        log('error', 'Sign in failed - incorrect credentials');
        setTimeout(function() {
          loginErr.classList.remove('show');
        }, 3000);
      }
    };

    // Enter key support
    pwdEl.onkeypress = function(e) {
      if (e.key === 'Enter') loginBtn.click();
    };
    uidEl.onkeypress = function(e) {
      if (e.key === 'Enter') pwdEl.focus();
    };

    // Logout
    document.getElementById('logoutBtn').onclick = function() {
      dashboardEl.classList.remove('show');
      loginEl.classList.remove('hidden');
      uidEl.value = '';
      pwdEl.value = '';
      log('warn', 'Signed out');
    };

    // Toggle layer
    function toggleLayer(header) {
      header.parentElement.classList.toggle('open');
    }

    // Open room
    function openRoom(name) {
      log('info', 'Opened room: ' + name);
      alert('Room: ' + name + '\n\nStatus: Online\nLast check: Just now');
    }

    // Show facet
    function showFacet(name) {
      var descs = {
        CMD: 'Command Execution - Run system commands securely',
        IDN: 'Identity & Authentication - Manage logins and access',
        EVD: 'Evidence Storage - Store and retrieve evidence files',
        EXE: 'Workflow Execution - Run automated workflows',
        OUT: 'Output Generation - Create reports and exports'
      };
      log('info', 'Accessed ' + name + ' facet');
      alert(name + ' Facet\n\n' + descs[name] + '\n\nStatus: Active');
    }

    // Show help
    function showHelp() {
      alert(
        'Genesis Control Panel - Quick Guide\n\n' +
        'ğŸ”¹ PENTAGON: Click any of the 5 main functions to access them\n\n' +
        'ğŸ”¹ LAYERS: Click a layer header to expand and see its rooms\n\n' +
        'ğŸ”¹ ROOMS: Click any room to check its status\n\n' +
        'ğŸ”¹ LOG: Activity is recorded at the bottom of the page\n\n' +
        'Need more help? Contact your system administrator.'
      );
    }

    // Log function
    function log(type, message) {
      var time = new Date().toLocaleTimeString('en-AU', { hour12: false });
      var entry = document.createElement('div');
      entry.className = 'log-entry';
      entry.innerHTML = '<span class="log-time">[' + time + ']</span> <span class="log-msg ' + type + '">' + message + '</span>';
      logBody.appendChild(entry);
      logBody.scrollTop = logBody.scrollHeight;
    }

    // Start stats counter
    function startStats() {
      setInterval(function() {
        uptime++;
        messages += Math.floor(Math.random() * 3);
        checks += Math.floor(Math.random() * 2);

        document.getElementById('uptime').textContent = uptime;
        document.getElementById('messages').textContent = messages;
        document.getElementById('checks').textContent = checks;

        // Random activity
        if (Math.random() < 0.1) {
          var rooms = ['Clock', 'Battery', 'Engine', 'Fuel', 'Relay', 'Filter'];
          var room = rooms[Math.floor(Math.random() * rooms.length)];
          log('info', room + ' check complete - OK');
        }
      }, 1000);
    }

    // Initial log
    log('info', 'Control Panel ready');
    log('info', 'Please sign in to continue');

    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
    // DEEP LINKING - iOS prefs: style URL navigation
    // Patterns:
    //   #layer=0           â†’ Open Layer 0 (Kernel)
    //   #room=Thermostat   â†’ Open specific room
    //   #facet=CMD         â†’ Open facet
    //   #layer=2&room=Tank â†’ Combined navigation
    //   #settings          â†’ Show settings
    //   #help              â†’ Show help
    // â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

    const DeepLink = {
      // Parse hash into params object
      parse: function(hash) {
        if (!hash || hash === '#') return {};
        const params = {};
        hash.replace(/^#/, '').split('&').forEach(function(part) {
          const [key, value] = part.split('=');
          if (key) params[decodeURIComponent(key)] = value ? decodeURIComponent(value) : true;
        });
        return params;
      },

      // Generate hash from params
      generate: function(params) {
        return '#' + Object.entries(params)
          .map(function([k, v]) {
            return v === true ? encodeURIComponent(k) : encodeURIComponent(k) + '=' + encodeURIComponent(v);
          })
          .join('&');
      },

      // Navigate to deep link
      navigate: function(params) {
        // Must be logged in
        if (!dashboardEl.classList.contains('show')) {
          log('warn', 'Deep link requires authentication');
          DeepLink.pending = params;
          return;
        }

        // Handle layer
        if (params.layer !== undefined) {
          const layerEl = document.querySelector('[data-layer="' + params.layer + '"]');
          if (layerEl) {
            layerEl.classList.add('open');
            layerEl.scrollIntoView({ behavior: 'smooth', block: 'start' });
            log('info', 'Deep link: Opened Layer ' + params.layer);
          }
        }

        // Handle room
        if (params.room) {
          const roomEl = document.querySelector('.room-name');
          // Find the room by name
          document.querySelectorAll('.room').forEach(function(el) {
            if (el.querySelector('.room-name').textContent === params.room) {
              // Expand parent layer
              const layerBody = el.closest('.layer-body');
              if (layerBody) {
                layerBody.parentElement.classList.add('open');
              }
              // Highlight room
              el.style.outline = '3px solid #667eea';
              el.scrollIntoView({ behavior: 'smooth', block: 'center' });
              setTimeout(function() { el.style.outline = ''; }, 2000);
              log('info', 'Deep link: Navigated to ' + params.room);
            }
          });
        }

        // Handle facet
        if (params.facet) {
          showFacet(params.facet);
          log('info', 'Deep link: Opened ' + params.facet + ' facet');
        }

        // Handle help
        if (params.help) {
          showHelp();
        }
      },

      // Get shareable link for current view
      getLink: function(params) {
        return window.location.origin + window.location.pathname + DeepLink.generate(params);
      },

      // Pending deep link (before login)
      pending: null
    };

    // Handle initial deep link
    if (window.location.hash) {
      DeepLink.navigate(DeepLink.parse(window.location.hash));
    }

    // Handle hash changes
    window.addEventListener('hashchange', function() {
      DeepLink.navigate(DeepLink.parse(window.location.hash));
    });

    // Execute pending deep link after login
    const originalLoginClick = loginBtn.onclick;
    loginBtn.onclick = function() {
      originalLoginClick.call(this);
      if (dashboardEl.classList.contains('show') && DeepLink.pending) {
        setTimeout(function() {
          DeepLink.navigate(DeepLink.pending);
          DeepLink.pending = null;
        }, 100);
      }
    };

    // Add copy link button to rooms
    function openRoom(name) {
      const link = DeepLink.getLink({ room: name });
      log('info', 'Opened room: ' + name);
      const confirmed = confirm(
        'Room: ' + name + '\n\n' +
        'Status: Online\n' +
        'Last check: Just now\n\n' +
        'Direct link:\n' + link + '\n\n' +
        'Copy link to clipboard?'
      );
      if (confirmed) {
        navigator.clipboard.writeText(link).then(function() {
          log('info', 'Copied deep link for ' + name);
        });
      }
      // Update URL without triggering navigation
      history.replaceState(null, '', DeepLink.generate({ room: name }));
    }

    // Add copy link to facets
    function showFacet(name) {
      const descs = {
        CMD: 'Command Execution - Run system commands securely',
        IDN: 'Identity & Authentication - Manage logins and access',
        EVD: 'Evidence Storage - Store and retrieve evidence files',
        EXE: 'Workflow Execution - Run automated workflows',
        OUT: 'Output Generation - Create reports and exports'
      };
      const link = DeepLink.getLink({ facet: name });
      log('info', 'Accessed ' + name + ' facet');
      const confirmed = confirm(
        name + ' Facet\n\n' +
        descs[name] + '\n\n' +
        'Status: Active\n\n' +
        'Direct link:\n' + link + '\n\n' +
        'Copy link to clipboard?'
      );
      if (confirmed) {
        navigator.clipboard.writeText(link).then(function() {
          log('info', 'Copied deep link for ' + name + ' facet');
        });
      }
      history.replaceState(null, '', DeepLink.generate({ facet: name }));
    }

    // Update help to include deep link info
    function showHelp() {
      alert(
        'Genesis Control Panel - Quick Guide\n\n' +
        'PENTAGON: Click any of the 5 main functions to access them\n\n' +
        'LAYERS: Click a layer header to expand and see its rooms\n\n' +
        'ROOMS: Click any room to check its status\n\n' +
        'LOG: Activity is recorded at the bottom of the page\n\n' +
        'DEEP LINKS: Share direct links to any room or facet!\n' +
        '  #room=Thermostat - Link to a room\n' +
        '  #facet=CMD - Link to a facet\n' +
        '  #layer=0 - Open a layer\n\n' +
        'Need more help? Contact your system administrator.'
      );
    }
  </script>
</body>
</html>
