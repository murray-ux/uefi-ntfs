<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GENESIS 2.0 — Code Viewer</title>
    <style>
        :root {
            --bg-primary: #0a0a0f;
            --bg-secondary: #12121a;
            --bg-tertiary: #1a1a25;
            --text-primary: #e8e8f0;
            --text-secondary: #a0a0b0;
            --accent-gold: #d4af37;
            --accent-cyan: #00d4ff;
            --accent-green: #00ff88;
            --accent-red: #ff4444;
            --border-color: #2a2a3a;
            --code-bg: #0d0d12;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            background: var(--bg-primary);
            color: var(--text-primary);
            line-height: 1.6;
        }

        .header {
            background: linear-gradient(135deg, var(--bg-secondary) 0%, var(--bg-tertiary) 100%);
            border-bottom: 1px solid var(--border-color);
            padding: 20px 40px;
            position: sticky;
            top: 0;
            z-index: 100;
        }

        .header h1 {
            font-size: 28px;
            background: linear-gradient(135deg, var(--accent-gold), var(--accent-cyan));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .header p {
            color: var(--text-secondary);
            margin-top: 5px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }

        .search-bar {
            margin-bottom: 30px;
            display: flex;
            gap: 15px;
        }

        .search-bar input {
            flex: 1;
            padding: 12px 20px;
            border: 1px solid var(--border-color);
            border-radius: 8px;
            background: var(--bg-secondary);
            color: var(--text-primary);
            font-size: 16px;
        }

        .search-bar input:focus {
            outline: none;
            border-color: var(--accent-cyan);
            box-shadow: 0 0 0 3px rgba(0, 212, 255, 0.1);
        }

        .category-filters {
            display: flex;
            gap: 10px;
            flex-wrap: wrap;
            margin-bottom: 30px;
        }

        .filter-btn {
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            border-radius: 20px;
            background: var(--bg-secondary);
            color: var(--text-secondary);
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .filter-btn:hover, .filter-btn.active {
            background: var(--accent-gold);
            color: var(--bg-primary);
            border-color: var(--accent-gold);
        }

        .glob-section {
            margin-bottom: 40px;
            border: 1px solid var(--border-color);
            border-radius: 12px;
            overflow: hidden;
            background: var(--bg-secondary);
        }

        .glob-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 16px 24px;
            background: var(--bg-tertiary);
            border-bottom: 1px solid var(--border-color);
            cursor: pointer;
        }

        .glob-header:hover {
            background: #22222f;
        }

        .glob-title {
            display: flex;
            align-items: center;
            gap: 12px;
        }

        .glob-title h2 {
            font-size: 18px;
            color: var(--accent-gold);
        }

        .glob-badge {
            padding: 4px 10px;
            border-radius: 4px;
            font-size: 12px;
            font-weight: 600;
            text-transform: uppercase;
        }

        .badge-config { background: #3b82f6; color: white; }
        .badge-boot { background: #8b5cf6; color: white; }
        .badge-db { background: #22c55e; color: white; }
        .badge-cli { background: #f59e0b; color: white; }
        .badge-lib { background: #ef4444; color: white; }
        .badge-shell { background: #06b6d4; color: white; }
        .badge-html { background: #ec4899; color: white; }
        .badge-test { background: #84cc16; color: white; }

        .glob-actions {
            display: flex;
            gap: 10px;
        }

        .action-btn {
            display: flex;
            align-items: center;
            gap: 6px;
            padding: 8px 16px;
            border: 1px solid var(--border-color);
            border-radius: 6px;
            background: var(--bg-primary);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 13px;
            transition: all 0.2s ease;
        }

        .action-btn:hover {
            background: var(--accent-cyan);
            color: var(--bg-primary);
            border-color: var(--accent-cyan);
        }

        .action-btn.copied {
            background: var(--accent-green);
            color: var(--bg-primary);
            border-color: var(--accent-green);
        }

        .glob-content {
            display: none;
        }

        .glob-content.expanded {
            display: block;
        }

        .file-block {
            border-bottom: 1px solid var(--border-color);
        }

        .file-block:last-child {
            border-bottom: none;
        }

        .file-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 24px;
            background: var(--bg-primary);
        }

        .file-name {
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
            color: var(--accent-cyan);
            font-size: 14px;
        }

        .file-meta {
            color: var(--text-secondary);
            font-size: 12px;
        }

        .code-wrapper {
            position: relative;
        }

        .copy-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            padding: 8px 14px;
            border: none;
            border-radius: 6px;
            background: var(--bg-tertiary);
            color: var(--text-secondary);
            cursor: pointer;
            font-size: 12px;
            transition: all 0.2s ease;
            z-index: 10;
        }

        .copy-btn:hover {
            background: var(--accent-gold);
            color: var(--bg-primary);
        }

        .copy-btn.copied {
            background: var(--accent-green);
            color: var(--bg-primary);
        }

        pre {
            margin: 0;
            padding: 20px 24px;
            background: var(--code-bg);
            overflow-x: auto;
            font-family: 'SF Mono', 'Monaco', 'Inconsolata', monospace;
            font-size: 13px;
            line-height: 1.5;
        }

        code {
            color: var(--text-primary);
        }

        .toggle-icon {
            width: 20px;
            height: 20px;
            transition: transform 0.2s ease;
        }

        .glob-section.expanded .toggle-icon {
            transform: rotate(90deg);
        }

        .stats-bar {
            display: flex;
            gap: 30px;
            padding: 15px 24px;
            background: var(--bg-tertiary);
            border-radius: 8px;
            margin-bottom: 30px;
        }

        .stat-item {
            display: flex;
            flex-direction: column;
        }

        .stat-value {
            font-size: 24px;
            font-weight: 700;
            color: var(--accent-gold);
        }

        .stat-label {
            font-size: 12px;
            color: var(--text-secondary);
            text-transform: uppercase;
        }

        .copy-all-btn {
            padding: 12px 24px;
            border: 2px solid var(--accent-gold);
            border-radius: 8px;
            background: transparent;
            color: var(--accent-gold);
            cursor: pointer;
            font-size: 14px;
            font-weight: 600;
            transition: all 0.2s ease;
        }

        .copy-all-btn:hover {
            background: var(--accent-gold);
            color: var(--bg-primary);
        }

        /* Syntax highlighting */
        .keyword { color: #c792ea; }
        .string { color: #c3e88d; }
        .comment { color: #546e7a; }
        .function { color: #82aaff; }
        .number { color: #f78c6c; }
        .operator { color: #89ddff; }

        @media (max-width: 768px) {
            .container {
                padding: 15px;
            }
            .glob-header {
                flex-direction: column;
                align-items: flex-start;
                gap: 10px;
            }
            .stats-bar {
                flex-wrap: wrap;
            }
        }
    </style>
</head>
<body>
    <div class="header">
        <h1>GENESIS 2.0 — Code Viewer</h1>
        <p>Inspect, copy, and edit all GENESIS source files</p>
    </div>

    <div class="container">
        <div class="stats-bar">
            <div class="stat-item">
                <span class="stat-value" id="totalFiles">23</span>
                <span class="stat-label">Total Files</span>
            </div>
            <div class="stat-item">
                <span class="stat-value" id="totalLines">7,200+</span>
                <span class="stat-label">Lines of Code</span>
            </div>
            <div class="stat-item">
                <span class="stat-value">8</span>
                <span class="stat-label">Categories</span>
            </div>
            <button class="copy-all-btn" onclick="copyAllCode()">Copy All Code</button>
        </div>

        <div class="search-bar">
            <input type="text" id="searchInput" placeholder="Search files or code..." onkeyup="filterGlobs()">
        </div>

        <div class="category-filters">
            <button class="filter-btn active" onclick="filterByCategory('all')">All</button>
            <button class="filter-btn" onclick="filterByCategory('config')">Config</button>
            <button class="filter-btn" onclick="filterByCategory('boot')">Boot</button>
            <button class="filter-btn" onclick="filterByCategory('db')">Database</button>
            <button class="filter-btn" onclick="filterByCategory('cli')">CLI</button>
            <button class="filter-btn" onclick="filterByCategory('lib')">Library</button>
            <button class="filter-btn" onclick="filterByCategory('shell')">Shell</button>
            <button class="filter-btn" onclick="filterByCategory('html')">HTML</button>
            <button class="filter-btn" onclick="filterByCategory('test')">Tests</button>
        </div>

        <div id="globContainer">
            <!-- GLOB 1: Configuration Files -->
            <div class="glob-section" data-category="config">
                <div class="glob-header" onclick="toggleGlob(this)">
                    <div class="glob-title">
                        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        <h2>GLOB 1: Configuration Files</h2>
                        <span class="glob-badge badge-config">CONFIG</span>
                    </div>
                    <div class="glob-actions">
                        <button class="action-btn" onclick="event.stopPropagation(); copyGlob(this, 'glob1')">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            Copy All
                        </button>
                    </div>
                </div>
                <div class="glob-content" id="glob1">
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">config/genesis_infrastructure.yml</span>
                            <span class="file-meta">YAML</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code># genesis_infrastructure.yml
# Role: Single source of truth for org identity, providers, and hardware.
# NOTE: All personal values replaced with env-var placeholders.

owner:
  name: "${OWNER_NAME}"
  primary_email: "${OWNER_EMAIL}"
  location: "${OWNER_LOCATION}"

organisation:
  name: "MuzzL3d Dictionary"
  domain_primary: "${ORG_DOMAIN_PRIMARY}"
  domain_secondary: "${ORG_DOMAIN_SECONDARY}"
  abn: "${ORG_ABN}"
  duns: "${ORG_DUNS}"
  usi: "${ORG_USI}"

identity_providers:
  bitwarden:
    org_id: "${BITWARDEN_ORG_ID}"
    portal: "https://vault.bitwarden.com"
    sso: true
  google_workspace:
    customer_id: "${GOOGLE_CUSTOMER_ID}"
    sso: true
  azure_m365:
    tenant_id: "${AZURE_TENANT_ID}"
    sso: true

emails:
  primary_admin: "${OWNER_EMAIL}"
  service_accounts:
    - "${SVC_ADMIN_EMAIL}"
    - "${SVC_INFO_EMAIL}"
    - "${SVC_OPS_EMAIL}"

hardware:
  main_station: "${HARDWARE_STATION}"
  os: "${HARDWARE_OS}"</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GLOB 2: Boot/Launch Scripts -->
            <div class="glob-section" data-category="boot">
                <div class="glob-header" onclick="toggleGlob(this)">
                    <div class="glob-title">
                        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        <h2>GLOB 2: Boot/Launch Scripts</h2>
                        <span class="glob-badge badge-boot">BOOT</span>
                    </div>
                    <div class="glob-actions">
                        <button class="action-btn" onclick="event.stopPropagation(); copyGlob(this, 'glob2')">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            Copy All
                        </button>
                    </div>
                </div>
                <div class="glob-content" id="glob2">
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">boot/genesis/genesis-boot.conf</span>
                            <span class="file-meta">CONFIG</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code># GENESIS 2.0 Boot Configuration
# Location: /boot/genesis/genesis-boot.conf

[genesis]
version = 2.0
codename = "Forbidden Ninja City"

[security]
require_yubikey = true
yubikey_mode = otp
min_auth_level = 2

[network]
default_port = 8080
bind_address = 0.0.0.0

[paths]
data_dir = ./data
keys_dir = ./data/keys
audit_dir = ./data/audit
evidence_dir = ./data/evidence

[owner]
id = owner
role = ADMIN</code></pre>
                        </div>
                    </div>
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">boot/genesis/genesis-init.sh</span>
                            <span class="file-meta">Shell</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>#!/bin/bash
# GENESIS 2.0 Live Boot Script
# For Linux/Mac USB portable operation

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
GENESIS_ROOT="$(dirname "$(dirname "$SCRIPT_DIR")")"

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
GOLD='\033[0;33m'
CYAN='\033[0;36m'
NC='\033[0m'

echo -e "${GOLD}"
cat &lt;&lt; 'EOF'
   ██████╗ ███████╗███╗   ██╗███████╗███████╗██╗███████╗
  ██╔════╝ ██╔════╝████╗  ██║██╔════╝██╔════╝██║██╔════╝
  ██║  ███╗█████╗  ██╔██╗ ██║█████╗  ███████╗██║███████╗
  ██║   ██║██╔══╝  ██║╚██╗██║██╔══╝  ╚════██║██║╚════██║
  ╚██████╔╝███████╗██║ ╚████║███████╗███████║██║███████║
   ╚═════╝ ╚══════╝╚═╝  ╚═══╝╚══════╝╚══════╝╚═╝╚══════╝
                   2.0 — Sovereign Security Platform
EOF
echo -e "${NC}"

# Check YubiKey
echo -e "${CYAN}[GENESIS]${NC} Checking YubiKey..."
if command -v ykman &amp;&gt; /dev/null; then
    if ykman list 2>/dev/null | grep -q "YubiKey"; then
        echo -e "${GREEN}[OK]${NC} YubiKey detected"
        YUBIKEY_PRESENT=true
    else
        echo -e "${RED}[WARN]${NC} No YubiKey found"
        YUBIKEY_PRESENT=false
    fi
else
    echo -e "${RED}[WARN]${NC} ykman not installed"
    YUBIKEY_PRESENT=false
fi

# Load environment
if [ -f "$GENESIS_ROOT/.env" ]; then
    export $(grep -v '^#' "$GENESIS_ROOT/.env" | xargs)
    echo -e "${GREEN}[OK]${NC} Environment loaded"
fi

# Start server
cd "$GENESIS_ROOT"
echo -e "${CYAN}[GENESIS]${NC} Starting server..."
npm start</code></pre>
                        </div>
                    </div>
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">boot/GENESIS-USB.bat</span>
                            <span class="file-meta">Batch</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>@echo off
:: GENESIS 2.0 USB Portable Launcher (Windows)
:: Run from USB drive root

setlocal enabledelayedexpansion

:: Colors via ANSI
for /F "tokens=1,2 delims=#" %%a in ('"prompt #$H#$E# & echo on & for %%b in (1) do rem"') do set "ESC=%%b"

echo %ESC%[33m
echo    ██████╗ ███████╗███╗   ██╗███████╗███████╗██╗███████╗
echo   ██╔════╝ ██╔════╝████╗  ██║██╔════╝██╔════╝██║██╔════╝
echo   ██║  ███╗█████╗  ██╔██╗ ██║█████╗  ███████╗██║███████╗
echo   ██║   ██║██╔══╝  ██║╚██╗██║██╔══╝  ╚════██║██║╚════██║
echo   ╚██████╔╝███████╗██║ ╚████║███████╗███████║██║███████║
echo    ╚═════╝ ╚══════╝╚═╝  ╚═══╝╚══════╝╚══════╝╚═╝╚══════╝
echo                    2.0 — Sovereign Security Platform
echo %ESC%[0m

:: Check YubiKey
echo %ESC%[36m[GENESIS]%ESC%[0m Checking YubiKey...
where ykman >nul 2>&1
if %errorlevel%==0 (
    ykman list 2>nul | findstr /i "YubiKey" >nul
    if !errorlevel!==0 (
        echo %ESC%[32m[OK]%ESC%[0m YubiKey detected
    ) else (
        echo %ESC%[31m[WARN]%ESC%[0m No YubiKey found
    )
) else (
    echo %ESC%[31m[WARN]%ESC%[0m ykman not installed
)

:: Navigate to project
cd /d "%~dp0caput-ultimate-edition"

:: Start server
echo %ESC%[36m[GENESIS]%ESC%[0m Starting server...
npm start

pause</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GLOB 3: Core Library Modules -->
            <div class="glob-section" data-category="lib">
                <div class="glob-header" onclick="toggleGlob(this)">
                    <div class="glob-title">
                        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        <h2>GLOB 3: Core Library Modules (Biblical Names)</h2>
                        <span class="glob-badge badge-lib">LIBRARY</span>
                    </div>
                    <div class="glob-actions">
                        <button class="action-btn" onclick="event.stopPropagation(); copyGlob(this, 'glob3')">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            Copy All
                        </button>
                    </div>
                </div>
                <div class="glob-content" id="glob3">
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">src/lib/genesis-init.js</span>
                            <span class="file-meta">JavaScript — 6-Phase Bootstrap</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>/**
 * GENESIS 2.0 — 6-Phase Bootstrap System
 * Single entry point for the entire control system.
 */

const path = require('path');
const { Merkava } = require('./merkava-command');
const { Tzofeh } = require('./tzofeh-sentinel');
const { Malakh } = require('./malakh-bus');
const { Keruv } = require('./keruv-security');
const { Eben } = require('./eben-evidence');
const { Shinobi } = require('./shinobi-security');
const { Tetsuya } = require('./tetsuya-defense');
const { Ruach } = require('./ruach-neural');
const { Ohr } = require('./ohr-observability');
const { Hadaat } = require('./hadaat-decision');
const { Nephesh } = require('./nephesh-hooks');
const { Kol } = require('./kol-logger');

const log = new Kol('GENESIS');

class GenesisBootstrap {
    constructor(config = {}) {
        this.config = {
            port: config.port || 3000,
            watchLevel: config.watchLevel || 'active',
            evidenceDir: config.evidenceDir || './data/evidence',
            ...config
        };
        this.modules = new Map();
        this.phase = 0;
    }

    async boot() {
        log.info('GENESIS 2.0 Bootstrap Initiated');
        log.info('='.repeat(50));

        try {
            await this.phase1_CoreInfrastructure();
            await this.phase2_SecurityLayer();
            await this.phase3_AIAndIntelligence();
            await this.phase4_Wire();
            await this.phase5_Dashboard();
            await this.phase6_Monitoring();

            log.success('GENESIS 2.0 Bootstrap Complete');
            log.info(`Dashboard: http://localhost:${this.config.port}`);
            return this.modules;
        } catch (error) {
            log.error(`Bootstrap failed at phase ${this.phase}: ${error.message}`);
            throw error;
        }
    }

    async phase1_CoreInfrastructure() {
        this.phase = 1;
        log.phase(1, 'Core Infrastructure');

        const merkava = new Merkava();
        const malakh = new Malakh();

        await merkava.init();
        await malakh.init();

        this.modules.set('MERKAVA', merkava);
        this.modules.set('MALAKH', malakh);

        log.success('MERKAVA + MALAKH initialized');
    }

    async phase2_SecurityLayer() {
        this.phase = 2;
        log.phase(2, 'Security Layer');

        const keruv = new Keruv();
        const shinobi = new Shinobi({ mode: 'stealth' });
        const eben = new Eben({ vaultPath: this.config.evidenceDir });

        await keruv.init();
        await shinobi.init();
        await eben.init();

        this.modules.set('KERUV', keruv);
        this.modules.set('SHINOBI', shinobi);
        this.modules.set('EBEN', eben);

        log.success('KERUV + SHINOBI + EBEN initialized');
    }

    async phase3_AIAndIntelligence() {
        this.phase = 3;
        log.phase(3, 'AI & Intelligence');

        const ruach = new Ruach();
        const ohr = new Ohr();
        const hadaat = new Hadaat();
        const tetsuya = new Tetsuya();
        const nephesh = new Nephesh();

        await Promise.all([
            ruach.init(),
            ohr.init(),
            hadaat.init(),
            tetsuya.init(),
            nephesh.init()
        ]);

        this.modules.set('RUACH', ruach);
        this.modules.set('OHR', ohr);
        this.modules.set('HADAAT', hadaat);
        this.modules.set('TETSUYA', tetsuya);
        this.modules.set('NEPHESH', nephesh);

        log.success('AI modules initialized');
    }

    async phase4_Wire() {
        this.phase = 4;
        log.phase(4, 'Wiring Modules');

        const merkava = this.modules.get('MERKAVA');
        const malakh = this.modules.get('MALAKH');

        // Register all modules with MERKAVA
        for (const [name, module] of this.modules) {
            if (name !== 'MERKAVA') {
                merkava.registerModule(name, module);
            }
        }

        // Subscribe to standard topics
        malakh.subscribe('security.*', async (msg) => {
            this.modules.get('KERUV').handleSecurityEvent(msg);
        });

        malakh.subscribe('evidence.*', async (msg) => {
            this.modules.get('EBEN').handleEvidenceEvent(msg);
        });

        log.success('All modules wired');
    }

    async phase5_Dashboard() {
        this.phase = 5;
        log.phase(5, 'Dashboard Server');

        // Dashboard server started separately
        log.success('Dashboard ready');
    }

    async phase6_Monitoring() {
        this.phase = 6;
        log.phase(6, 'Monitoring');

        const tzofeh = new Tzofeh();
        await tzofeh.init();
        tzofeh.setWatchLevel(this.config.watchLevel);

        this.modules.set('TZOFEH', tzofeh);

        // Deploy guardians for critical modules
        tzofeh.deployGuardian('merkava', this.modules.get('MERKAVA'));
        tzofeh.deployGuardian('malakh', this.modules.get('MALAKH'));

        log.success('TZOFEH Sentinel active');
    }
}

module.exports = { GenesisBootstrap };

// CLI entry point
if (require.main === module) {
    const args = process.argv.slice(2);
    const config = {
        port: parseInt(args.find(a => a.startsWith('--port='))?.split('=')[1]) || 3000,
        watchLevel: args.find(a => a.startsWith('--watch-level='))?.split('=')[1] || 'active'
    };

    const genesis = new GenesisBootstrap(config);
    genesis.boot().catch(console.error);
}</code></pre>
                        </div>
                    </div>
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">src/lib/merkava-command.js</span>
                            <span class="file-meta">JavaScript — MERKAVA Command Center</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>/**
 * MERKAVA (מרכבה) — Master Command Center
 * The Chariot that orchestrates all GENESIS modules.
 */

const { Kol } = require('./kol-logger');

class Merkava {
    constructor() {
        this.log = new Kol('MERKAVA');
        this.modules = new Map();
        this.alerts = [];
        this.commandLog = [];
        this.sovereignMode = false;
        this.lockdownActive = false;
    }

    async init() {
        this.log.info('MERKAVA Command Center initializing...');
        this.startTime = Date.now();
        this.log.success('MERKAVA ready');
    }

    registerModule(name, instance) {
        this.modules.set(name, instance);
        this.log.debug(`Registered module: ${name}`);
    }

    async sendDirective(target, command, payload = {}) {
        const directive = {
            id: `dir_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,
            target,
            command,
            payload,
            timestamp: new Date().toISOString()
        };

        this.commandLog.push(directive);

        const module = this.modules.get(target);
        if (!module) {
            throw new Error(`Unknown module: ${target}`);
        }

        if (typeof module[command] === 'function') {
            return await module[command](payload);
        }

        throw new Error(`Module ${target} has no method: ${command}`);
    }

    async broadcast(command, payload = {}) {
        const results = new Map();
        for (const [name, module] of this.modules) {
            try {
                if (typeof module[command] === 'function') {
                    results.set(name, await module[command](payload));
                }
            } catch (error) {
                results.set(name, { error: error.message });
            }
        }
        return results;
    }

    async executeWorkflow(workflowName) {
        this.log.info(`Executing workflow: ${workflowName}`);
        // Workflow execution logic
        return { workflow: workflowName, status: 'completed' };
    }

    async initiateLockdown(reason) {
        this.lockdownActive = true;
        this.log.warn(`LOCKDOWN INITIATED: ${reason}`);
        await this.broadcast('lockdown', { reason });
        return { lockdown: true, reason, timestamp: new Date().toISOString() };
    }

    getStatus() {
        return {
            status: this.lockdownActive ? 'lockdown' : 'operational',
            modules: {
                total: this.modules.size,
                healthy: this.modules.size,
                degraded: 0,
                failed: 0
            },
            uptime: Date.now() - this.startTime,
            lastDirective: this.commandLog[this.commandLog.length - 1]?.timestamp,
            sovereignMode: this.sovereignMode
        };
    }

    sovereign = {
        authorize: async ({ passphrase, yubikey }) => {
            // Sovereign mode authorization
            this.sovereignMode = true;
            return { authorized: true };
        },
        executePrivileged: async (command) => {
            if (!this.sovereignMode) {
                throw new Error('Sovereign mode not active');
            }
            // Execute privileged command
            return { executed: command };
        }
    };
}

module.exports = { Merkava };</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GLOB 4: CLI Scripts -->
            <div class="glob-section" data-category="cli">
                <div class="glob-header" onclick="toggleGlob(this)">
                    <div class="glob-title">
                        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        <h2>GLOB 4: CLI Scripts</h2>
                        <span class="glob-badge badge-cli">CLI</span>
                    </div>
                    <div class="glob-actions">
                        <button class="action-btn" onclick="event.stopPropagation(); copyGlob(this, 'glob4')">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            Copy All
                        </button>
                    </div>
                </div>
                <div class="glob-content" id="glob4">
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">src/cli/genesis.js</span>
                            <span class="file-meta">JavaScript — Main CLI Entry</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>#!/usr/bin/env node
/**
 * GENESIS 2.0 — Unified CLI
 * Main entry point for all GENESIS commands.
 */

const { program } = require('commander');
const { GenesisBootstrap } = require('../lib/genesis-init');
const { Kol } = require('../lib/kol-logger');

const log = new Kol('CLI');

program
    .name('genesis')
    .description('GENESIS 2.0 Sovereign Security Platform')
    .version('2.0.0');

program
    .command('health')
    .description('Run system health check')
    .action(async () => {
        log.info('Running health check...');
        const genesis = new GenesisBootstrap();
        await genesis.boot();
        const merkava = genesis.modules.get('MERKAVA');
        console.log(JSON.stringify(merkava.getStatus(), null, 2));
    });

program
    .command('pentagon')
    .description('Pentagon framework commands')
    .argument('&lt;subcommand&gt;', 'list | room | layer')
    .argument('[args...]', 'Additional arguments')
    .action(async (subcommand, args) => {
        log.info(`Pentagon: ${subcommand} ${args.join(' ')}`);
        // Pentagon command handling
    });

program
    .command('ai')
    .description('AI assistant')
    .argument('[query]', 'Query for the AI')
    .action(async (query) => {
        if (query) {
            log.info(`AI Query: ${query}`);
        } else {
            log.info('Starting interactive AI mode...');
        }
    });

program
    .command('evidence')
    .description('Evidence management')
    .argument('&lt;subcommand&gt;', 'interactive | store | retrieve')
    .action(async (subcommand) => {
        log.info(`Evidence: ${subcommand}`);
    });

program.parse();</code></pre>
                        </div>
                    </div>
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">src/cli/genesis-control.js</span>
                            <span class="file-meta">JavaScript — Control CLI</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>#!/usr/bin/env node
/**
 * GENESIS 2.0 Control CLI
 * Command-line access to the control system.
 */

const { program } = require('commander');
const http = require('http');
const { Kol } = require('../lib/kol-logger');

const log = new Kol('CONTROL');
const BASE_URL = process.env.GENESIS_DASHBOARD_URL || 'http://localhost:3000';

async function apiCall(method, path, body = null) {
    return new Promise((resolve, reject) => {
        const url = new URL(path, BASE_URL);
        const options = {
            method,
            hostname: url.hostname,
            port: url.port,
            path: url.pathname,
            headers: { 'Content-Type': 'application/json' }
        };

        const req = http.request(options, (res) => {
            let data = '';
            res.on('data', chunk => data += chunk);
            res.on('end', () => {
                try {
                    resolve(JSON.parse(data));
                } catch {
                    resolve(data);
                }
            });
        });

        req.on('error', reject);
        if (body) req.write(JSON.stringify(body));
        req.end();
    });
}

program
    .name('genesis-control')
    .description('GENESIS 2.0 Control System CLI')
    .version('2.0.0');

program
    .command('status')
    .description('Get system status')
    .action(async () => {
        const status = await apiCall('GET', '/api/merkava/status');
        console.log(JSON.stringify(status, null, 2));
    });

program
    .command('modules')
    .description('List all modules')
    .action(async () => {
        const modules = await apiCall('GET', '/api/system/modules');
        console.log(JSON.stringify(modules, null, 2));
    });

program
    .command('health')
    .description('Aggregated health check')
    .action(async () => {
        const health = await apiCall('GET', '/api/system/health');
        console.log(JSON.stringify(health, null, 2));
    });

// MERKAVA subcommands
const merkava = program.command('merkava').description('MERKAVA commands');

merkava.command('status').action(async () => {
    const status = await apiCall('GET', '/api/merkava/status');
    console.log(JSON.stringify(status, null, 2));
});

merkava.command('directive &lt;target&gt; &lt;command&gt; [payload]').action(async (target, command, payload) => {
    const result = await apiCall('POST', '/api/merkava/directive', {
        target, command, payload: payload ? JSON.parse(payload) : {}
    });
    console.log(JSON.stringify(result, null, 2));
});

merkava.command('broadcast &lt;command&gt;').action(async (command) => {
    const result = await apiCall('POST', '/api/merkava/broadcast', { command });
    console.log(JSON.stringify(result, null, 2));
});

merkava.command('lockdown &lt;reason&gt;').action(async (reason) => {
    const result = await apiCall('POST', '/api/merkava/lockdown', { reason });
    console.log(JSON.stringify(result, null, 2));
});

// TZOFEH subcommands
const tzofeh = program.command('tzofeh').description('TZOFEH commands');

tzofeh.command('status').action(async () => {
    const status = await apiCall('GET', '/api/tzofeh/status');
    console.log(JSON.stringify(status, null, 2));
});

tzofeh.command('watch-level &lt;level&gt;').action(async (level) => {
    const result = await apiCall('POST', '/api/tzofeh/watch-level', { level });
    console.log(JSON.stringify(result, null, 2));
});

tzofeh.command('anomalies').action(async () => {
    const anomalies = await apiCall('GET', '/api/tzofeh/anomalies');
    console.log(JSON.stringify(anomalies, null, 2));
});

// MALAKH subcommands
const malakh = program.command('malakh').description('MALAKH commands');

malakh.command('status').action(async () => {
    const status = await apiCall('GET', '/api/malakh/status');
    console.log(JSON.stringify(status, null, 2));
});

malakh.command('publish &lt;topic&gt; &lt;payload&gt;').action(async (topic, payload) => {
    const result = await apiCall('POST', '/api/malakh/publish', {
        topic, payload: JSON.parse(payload)
    });
    console.log(JSON.stringify(result, null, 2));
});

program.parse();</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GLOB 5: Database -->
            <div class="glob-section" data-category="db">
                <div class="glob-header" onclick="toggleGlob(this)">
                    <div class="glob-title">
                        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        <h2>GLOB 5: Database Schemas</h2>
                        <span class="glob-badge badge-db">DATABASE</span>
                    </div>
                    <div class="glob-actions">
                        <button class="action-btn" onclick="event.stopPropagation(); copyGlob(this, 'glob5')">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            Copy All
                        </button>
                    </div>
                </div>
                <div class="glob-content" id="glob5">
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">db/genesis_platform.sql</span>
                            <span class="file-meta">SQL — Platform Schema</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>-- GENESIS 2.0 Platform Schema
-- PostgreSQL 15+ with RLS

-- Extensions
CREATE EXTENSION IF NOT EXISTS "uuid-ossp";
CREATE EXTENSION IF NOT EXISTS "pgcrypto";

-- Owners table
CREATE TABLE IF NOT EXISTS owners (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    external_id TEXT UNIQUE NOT NULL,
    name TEXT NOT NULL,
    email TEXT UNIQUE NOT NULL,
    role TEXT NOT NULL DEFAULT 'user',
    yubikey_serial TEXT,
    created_at TIMESTAMPTZ DEFAULT NOW(),
    updated_at TIMESTAMPTZ DEFAULT NOW()
);

-- Evidence table with hash-chain
CREATE TABLE IF NOT EXISTS evidence (
    id UUID PRIMARY KEY DEFAULT uuid_generate_v4(),
    case_id TEXT NOT NULL,
    type TEXT NOT NULL,
    content_hash TEXT NOT NULL,
    prev_hash TEXT,
    signature TEXT NOT NULL,
    metadata JSONB DEFAULT '{}',
    owner_id UUID REFERENCES owners(id),
    created_at TIMESTAMPTZ DEFAULT NOW(),
    CONSTRAINT evidence_chain CHECK (
        prev_hash IS NULL OR
        prev_hash = (
            SELECT content_hash FROM evidence e2
            WHERE e2.created_at < evidence.created_at
            ORDER BY created_at DESC LIMIT 1
        )
    )
);

-- Audit ledger (append-only)
CREATE TABLE IF NOT EXISTS audit_ledger (
    id BIGSERIAL PRIMARY KEY,
    event_type TEXT NOT NULL,
    principal TEXT NOT NULL,
    resource TEXT,
    action TEXT NOT NULL,
    result TEXT NOT NULL,
    prev_hash TEXT,
    event_hash TEXT NOT NULL,
    metadata JSONB DEFAULT '{}',
    created_at TIMESTAMPTZ DEFAULT NOW()
);

-- Create index on audit ledger
CREATE INDEX IF NOT EXISTS idx_audit_ledger_event_hash
ON audit_ledger(event_hash);

CREATE INDEX IF NOT EXISTS idx_audit_ledger_principal
ON audit_ledger(principal);

-- Row Level Security
ALTER TABLE evidence ENABLE ROW LEVEL SECURITY;

CREATE POLICY evidence_owner_policy ON evidence
    FOR ALL
    USING (owner_id = current_setting('app.current_owner_id')::uuid);

-- Trigger for updated_at
CREATE OR REPLACE FUNCTION update_updated_at()
RETURNS TRIGGER AS $$
BEGIN
    NEW.updated_at = NOW();
    RETURN NEW;
END;
$$ LANGUAGE plpgsql;

CREATE TRIGGER owners_updated_at
    BEFORE UPDATE ON owners
    FOR EACH ROW
    EXECUTE FUNCTION update_updated_at();</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GLOB 6: Shell Scripts -->
            <div class="glob-section" data-category="shell">
                <div class="glob-header" onclick="toggleGlob(this)">
                    <div class="glob-title">
                        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        <h2>GLOB 6: Shell Scripts</h2>
                        <span class="glob-badge badge-shell">SHELL</span>
                    </div>
                    <div class="glob-actions">
                        <button class="action-btn" onclick="event.stopPropagation(); copyGlob(this, 'glob6')">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            Copy All
                        </button>
                    </div>
                </div>
                <div class="glob-content" id="glob6">
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">deploy/genesis-deploy.sh</span>
                            <span class="file-meta">Shell — Deployment Script</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>#!/bin/bash
# GENESIS 2.0 Deployment Script
# Usage: ./genesis-deploy.sh [--docker|--local]

set -euo pipefail

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(dirname "$SCRIPT_DIR")"

# Colors
RED='\033[0;31m'
GREEN='\033[0;32m'
GOLD='\033[0;33m'
CYAN='\033[0;36m'
NC='\033[0m'

log() { echo -e "${CYAN}[DEPLOY]${NC} $1"; }
success() { echo -e "${GREEN}[OK]${NC} $1"; }
error() { echo -e "${RED}[ERROR]${NC} $1"; exit 1; }

# Parse arguments
DEPLOY_MODE="local"
while [[ $# -gt 0 ]]; do
    case $1 in
        --docker) DEPLOY_MODE="docker"; shift ;;
        --local) DEPLOY_MODE="local"; shift ;;
        *) error "Unknown option: $1" ;;
    esac
done

log "GENESIS 2.0 Deployment"
log "Mode: $DEPLOY_MODE"

cd "$PROJECT_ROOT"

if [[ "$DEPLOY_MODE" == "docker" ]]; then
    log "Building Docker image..."
    docker compose build

    log "Starting containers..."
    docker compose up -d

    success "Docker deployment complete"
    log "Dashboard: http://localhost:8080"
else
    log "Installing dependencies..."
    npm install

    log "Running setup..."
    npm run setup

    log "Starting server..."
    npm start &

    success "Local deployment complete"
    log "Dashboard: http://localhost:8080"
fi</code></pre>
                        </div>
                    </div>
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">bin/genesis_master.sh</span>
                            <span class="file-meta">Shell — Master Orchestration</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>#!/bin/bash
# GENESIS 2.0 Master Orchestration Script
# Provides unified control over all GENESIS operations

set -euo pipefail

GENESIS_ROOT="${GENESIS_ROOT:-$(cd "$(dirname "${BASH_SOURCE[0]}")/.." && pwd)}"

# Load environment
if [[ -f "$GENESIS_ROOT/.env" ]]; then
    export $(grep -v '^#' "$GENESIS_ROOT/.env" | xargs)
fi

case "${1:-help}" in
    start)
        echo "Starting GENESIS 2.0..."
        cd "$GENESIS_ROOT"
        npm start
        ;;
    stop)
        echo "Stopping GENESIS 2.0..."
        pkill -f "genesis" || true
        ;;
    status)
        curl -s http://localhost:${GENESIS_PDP_PORT:-8080}/health | jq .
        ;;
    health)
        curl -s http://localhost:${GENESIS_PDP_PORT:-8080}/api/system/health | jq .
        ;;
    modules)
        curl -s http://localhost:${GENESIS_PDP_PORT:-8080}/api/system/modules | jq .
        ;;
    *)
        echo "GENESIS 2.0 Master Script"
        echo "Usage: $0 {start|stop|status|health|modules}"
        ;;
esac</code></pre>
                        </div>
                    </div>
                </div>
            </div>

            <!-- GLOB 7: Tests -->
            <div class="glob-section" data-category="test">
                <div class="glob-header" onclick="toggleGlob(this)">
                    <div class="glob-title">
                        <svg class="toggle-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <polyline points="9 18 15 12 9 6"></polyline>
                        </svg>
                        <h2>GLOB 7: Test Suites</h2>
                        <span class="glob-badge badge-test">TESTS</span>
                    </div>
                    <div class="glob-actions">
                        <button class="action-btn" onclick="event.stopPropagation(); copyGlob(this, 'glob7')">
                            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                                <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                            </svg>
                            Copy All
                        </button>
                    </div>
                </div>
                <div class="glob-content" id="glob7">
                    <div class="file-block">
                        <div class="file-header">
                            <span class="file-name">test/genesis-modules.test.js</span>
                            <span class="file-meta">JavaScript — Module Tests</span>
                        </div>
                        <div class="code-wrapper">
                            <button class="copy-btn" onclick="copyCode(this)">Copy</button>
                            <pre><code>/**
 * GENESIS 2.0 Module Integration Tests
 * Tests for all biblical-named modules.
 */

const { describe, it, before, after } = require('node:test');
const assert = require('node:assert');
const { GenesisBootstrap } = require('../src/lib/genesis-init');

describe('GENESIS 2.0 Module Tests', () => {
    let genesis;
    let modules;

    before(async () => {
        genesis = new GenesisBootstrap({ port: 3001 });
        modules = await genesis.boot();
    });

    describe('MERKAVA Command Center', () => {
        it('should initialize successfully', () => {
            const merkava = modules.get('MERKAVA');
            assert(merkava, 'MERKAVA should exist');
        });

        it('should return status', () => {
            const merkava = modules.get('MERKAVA');
            const status = merkava.getStatus();
            assert.equal(status.status, 'operational');
        });

        it('should broadcast to all modules', async () => {
            const merkava = modules.get('MERKAVA');
            const results = await merkava.broadcast('healthCheck');
            assert(results.size > 0, 'Should have broadcast results');
        });
    });

    describe('TZOFEH Sentinel', () => {
        it('should initialize successfully', () => {
            const tzofeh = modules.get('TZOFEH');
            assert(tzofeh, 'TZOFEH should exist');
        });

        it('should set watch level', () => {
            const tzofeh = modules.get('TZOFEH');
            tzofeh.setWatchLevel('combat');
            assert.equal(tzofeh.watchLevel, 'combat');
        });
    });

    describe('MALAKH Message Bus', () => {
        it('should initialize successfully', () => {
            const malakh = modules.get('MALAKH');
            assert(malakh, 'MALAKH should exist');
        });

        it('should publish and subscribe', async () => {
            const malakh = modules.get('MALAKH');
            let received = false;

            malakh.subscribe('test.topic', () => {
                received = true;
            });

            malakh.publish('test.topic', { data: 'test' });

            // Wait for async processing
            await new Promise(r => setTimeout(r, 100));
            assert(received, 'Should receive published message');
        });
    });

    describe('KERUV Security', () => {
        it('should initialize successfully', () => {
            const keruv = modules.get('KERUV');
            assert(keruv, 'KERUV should exist');
        });
    });

    describe('EBEN Evidence', () => {
        it('should initialize successfully', () => {
            const eben = modules.get('EBEN');
            assert(eben, 'EBEN should exist');
        });
    });
});</code></pre>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>

    <script>
        function toggleGlob(header) {
            const section = header.closest('.glob-section');
            section.classList.toggle('expanded');
            const content = section.querySelector('.glob-content');
            content.classList.toggle('expanded');
        }

        function copyCode(button) {
            const codeWrapper = button.closest('.code-wrapper');
            const code = codeWrapper.querySelector('code').textContent;

            navigator.clipboard.writeText(code).then(() => {
                button.textContent = 'Copied!';
                button.classList.add('copied');
                setTimeout(() => {
                    button.textContent = 'Copy';
                    button.classList.remove('copied');
                }, 2000);
            });
        }

        function copyGlob(button, globId) {
            const content = document.getElementById(globId);
            const codeBlocks = content.querySelectorAll('code');
            let allCode = '';

            codeBlocks.forEach((code, index) => {
                const fileName = code.closest('.file-block').querySelector('.file-name').textContent;
                allCode += `// ═══════════════════════════════════════\n`;
                allCode += `// FILE: ${fileName}\n`;
                allCode += `// ═══════════════════════════════════════\n\n`;
                allCode += code.textContent + '\n\n';
            });

            navigator.clipboard.writeText(allCode).then(() => {
                button.innerHTML = `
                    <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                        <polyline points="20 6 9 17 4 12"></polyline>
                    </svg>
                    Copied!
                `;
                button.classList.add('copied');
                setTimeout(() => {
                    button.innerHTML = `
                        <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                            <rect x="9" y="9" width="13" height="13" rx="2" ry="2"></rect>
                            <path d="M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"></path>
                        </svg>
                        Copy All
                    `;
                    button.classList.remove('copied');
                }, 2000);
            });
        }

        function copyAllCode() {
            const sections = document.querySelectorAll('.glob-section');
            let allCode = '';

            sections.forEach(section => {
                const title = section.querySelector('.glob-title h2').textContent;
                allCode += `\n${'═'.repeat(60)}\n`;
                allCode += `${title}\n`;
                allCode += `${'═'.repeat(60)}\n\n`;

                const codeBlocks = section.querySelectorAll('code');
                codeBlocks.forEach(code => {
                    const fileName = code.closest('.file-block').querySelector('.file-name').textContent;
                    allCode += `// FILE: ${fileName}\n`;
                    allCode += `// ${'─'.repeat(50)}\n\n`;
                    allCode += code.textContent + '\n\n';
                });
            });

            navigator.clipboard.writeText(allCode).then(() => {
                const btn = document.querySelector('.copy-all-btn');
                btn.textContent = 'Copied All!';
                setTimeout(() => {
                    btn.textContent = 'Copy All Code';
                }, 2000);
            });
        }

        function filterGlobs() {
            const searchText = document.getElementById('searchInput').value.toLowerCase();
            const sections = document.querySelectorAll('.glob-section');

            sections.forEach(section => {
                const text = section.textContent.toLowerCase();
                section.style.display = text.includes(searchText) ? 'block' : 'none';
            });
        }

        function filterByCategory(category) {
            const buttons = document.querySelectorAll('.filter-btn');
            buttons.forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            const sections = document.querySelectorAll('.glob-section');
            sections.forEach(section => {
                if (category === 'all' || section.dataset.category === category) {
                    section.style.display = 'block';
                } else {
                    section.style.display = 'none';
                }
            });
        }
    </script>
</body>
</html>
